{"version":3,"file":"teacher.min.js","sources":["peerinst/static/peerinst/js/ajax.js","peerinst/static/peerinst/js/utils.js","reputation/static/reputation/js/header/header.js","reputation/static/reputation/js/header/teacher.js"],"sourcesContent":["\"use strict\";\n\nexport function getCsrfToken() {\n  return document\n    .getElementsByName(\"csrfmiddlewaretoken\")[0]\n    .getAttribute(\"value\");\n}\n\nexport function buildReq(data, method) {\n  if (method.toLowerCase() === \"get\") {\n    return {\n      method: method.toUpperCase(),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": getCsrfToken(),\n      },\n    };\n  } else if (method.toLowerCase() === \"post\") {\n    const body = data ? JSON.stringify(data) : \"\";\n    return {\n      method: method.toUpperCase(),\n      body: body,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": getCsrfToken(),\n      },\n    };\n  } else {\n    throw Error(`Method ${method} not implemented yet.`);\n  }\n}\n\nexport function updateAssignmentQuestionList(\n  url,\n  questionId,\n  assignmentIdentifier,\n) {\n  const token = getCsrfToken();\n  const data = {\n    question_id: questionId,\n    assignment_identifier: assignmentIdentifier,\n  };\n  const req = {\n    method: \"POST\",\n    body: JSON.stringify(data),\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"X-CSRFToken\": token,\n    },\n  };\n  fetch(url, req)\n    .then(function(resp) {\n      if (!resp.ok) {\n        console.log(resp);\n      } else {\n        // Manipulate DOM\n        const list = document.getElementById(\"question-list\");\n        const card = document.getElementById(questionId);\n        if ($.contains(list, card)) {\n          $(\"#\" + questionId).remove();\n        } else {\n          $(\"#\" + questionId)\n            .find($(\".update-questions-btn\"))\n            .html(\"delete\");\n          const q = $(\"#\" + questionId).detach();\n          q.appendTo($(\"#question-list\"));\n          $(\"#empty-assignment-list\").remove();\n          $(\".search-set\").each(function() {\n            $(this) // eslint-disable-line no-invalid-this\n              .find(\".filter-count\")\n              .empty()\n              .append($(this).find(\".mdc-card:visible\").length); // eslint-disable-line no-invalid-this,max-len\n          });\n          $(\".search-set\").each(function() {\n            $(this) // eslint-disable-line no-invalid-this\n              .find(\".filter-count-total\")\n              .empty()\n              .append($(this).find(\".mdc-card\").length); // eslint-disable-line no-invalid-this,max-len\n          });\n        }\n      }\n    })\n    .catch(function(err) {\n      console.log(err);\n    });\n}\n","// @flow\n\"use strict\";\n\nexport function clear(node: HTMLElement): HTMLElement {\n  while (node.hasChildNodes()) {\n    // $FlowFixMe\n    node.removeChild(node.lastChild);\n  }\n  return node;\n}\n\nexport function formatDatetime(datetime: Date): string {\n  return (\n    datetime.toLocaleString(\"en-ca\", { year: \"numeric\" }) +\n    \"-\" +\n    datetime.toLocaleString(\"en-ca\", { month: \"2-digit\" }) +\n    \"-\" +\n    datetime.toLocaleString(\"en-ca\", { day: \"2-digit\" }) +\n    \" \" +\n    datetime.toLocaleString(\"en-ca\", { hour: \"2-digit\", hour12: false }) +\n    \":\" +\n    datetime.toLocaleString(\"en-ca\", { minute: \"2-digit\" })\n  );\n}\n\nexport function createSvg(name: string, useSprite: boolean = true): Element {\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  const use = document.createElementNS(\"http://www.w3.org/2000/svg\", \"use\");\n  use.setAttributeNS(\n    \"http://www.w3.org/1999/xlink\",\n    \"href\",\n    svgLink(name, useSprite),\n  );\n  svg.append(use);\n  return svg;\n}\n\nexport function svgLink(name: string, useSprite: boolean = true): string {\n  if (useSprite) {\n    return `#${name}`;\n  } else {\n    return (\n      window.location.protocol +\n      \"//\" +\n      window.location.host +\n      \"/static/peerinst/icons.svg#\" +\n      name\n    );\n  }\n}\n\nexport function showAlert(msg: string) {\n  const fullPageBox = document.createElement(\"div\");\n  fullPageBox.classList.add(\"alert-box__full-page\");\n  fullPageBox.addEventListener(\"click\", (event: MouseEvent) => {\n    event.stopPropagation();\n    fullPageBox.parentNode?.removeChild(fullPageBox);\n  });\n  document.body?.appendChild(fullPageBox);\n\n  const box = document.createElement(\"div\");\n  box.classList.add(\"alert-box__box\");\n  box.addEventListener(\"click\", (event: MouseEvent) =>\n    event.stopPropagation(),\n  );\n  fullPageBox.appendChild(box);\n\n  const span = document.createElement(\"span\");\n  span.classList.add(\"alert-box__msg\");\n  span.textContent = msg;\n  box.appendChild(span);\n\n  const ok = document.createElement(\"button\");\n  ok.classList.add(\"alert-box__btn\", \"mdc-button\", \"mdc-button--unelevated\");\n  ok.textContent = \"Ok\";\n  box.appendChild(ok);\n}\n","export class ReputationHeader extends HTMLElement {\n  static get observedAttributes() {\n    // Any change to stale attribute should fire a refresh event\n    return [\"stale\"];\n  }\n\n  get reputationUrl(): string {\n    const url = this.getAttribute(\"reputation-url\");\n    if (!url) {\n      throw new Error(\n        \"The reputation-header needs a `reputation-url` attribute\",\n      );\n    }\n    return url;\n  }\n  get reputationStyleUrl(): string {\n    const style = this.getAttribute(\"reputation-style-url\");\n    if (!style) {\n      throw new Error(\n        \"The reputation-header needs a `reputation-style-url` attribute\",\n      );\n    }\n    return style;\n  }\n  get reputationId(): string {\n    const id = this.getAttribute(\"reputation-id\");\n    if (!id) {\n      throw new Error(\n        \"The reputation-header needs a `reputation-id` attribute\",\n      );\n    }\n    return id;\n  }\n  get nonce_(): string {\n    const nonce = this.getAttribute(\"nonce\") || this.nonce;\n    if (!nonce) {\n      throw new Error(\n        \"The teacher-reputation-header needs a `nonce` attribute\",\n      );\n    }\n    return nonce;\n  }\n  get hidden() {\n    return this.hasAttribute(\"hidden\");\n  }\n  get open() {\n    return this.hasAttribute(\"open\");\n  }\n  set hidden(val: boolean) {\n    if (val) {\n      this.setAttribute(\"hidden\", \"\");\n    } else {\n      this.removeAttribute(\"hidden\");\n    }\n  }\n  set open(val: boolean) {\n    if (val) {\n      this.setAttribute(\"open\", \"\");\n    } else {\n      this.removeAttribute(\"open\");\n    }\n  }\n\n  constructor() {\n    super();\n\n    const shadow = this.attachShadow({ mode: \"open\" });\n\n    this.hidden = true;\n\n    this.init(shadow);\n  }\n\n  attributeChangedCallback(attrName, oldVal, newVal) {\n    if (attrName === \"stale\") {\n      this.update();\n    }\n  }\n}\n","// @flow\n\"use strict\";\nimport { buildReq } from \"../../../../../peerinst/static/peerinst/js/ajax.js\";\nimport { clear } from \"../../../../../peerinst/static/peerinst/js/utils.js\";\nimport { ReputationHeader } from \"./header.js\";\n\nclass TeacherReputationHeader extends ReputationHeader {\n  async init(shadow: ShadowRoot) {\n    /*********/\n    /* model */\n    /*********/\n\n    type Reputation = {\n      name: string,\n      description: string,\n      reputation: number,\n    };\n\n    type Model = {\n      id: number,\n      element: TeacherReputationHeader,\n      reputation: ?number,\n      reputationType: string,\n      reputationUrl: string,\n      reputations: Array<Reputation>,\n      shadow: ShadowRoot,\n    };\n\n    const model: Model = {\n      id: parseInt(this.reputationId),\n      element: this,\n      reputation: null,\n      reputationStyleUrl: this.reputationStyleUrl,\n      reputationType: \"teacher\",\n      reputationUrl: this.reputationUrl,\n      reputations: [],\n      shadow: shadow,\n    };\n\n    /**********/\n    /* update */\n    /**********/\n    this.update = update;\n\n    async function update() {\n      await getReputation();\n      if (model.reputation !== null) {\n        model.element.hidden = false;\n      }\n    }\n\n    async function getReputation() {\n      const postData = {\n        reputation_type: model.reputationType,\n        id: model.id,\n      };\n      const req = buildReq(postData, \"post\");\n      const resp = await fetch(model.reputationUrl, req);\n      const data = await resp.json();\n      model.reputation = data.reputation;\n      model.reputations = data.reputations.map(reputation => ({\n        name: reputation.full_name,\n        description: reputation.description,\n        reputation: reputation.reputation,\n      }));\n      iconView();\n      listView();\n    }\n\n    function toggleReputationList() {\n      const header = model.element;\n      document.querySelectorAll(\".header--togglable > *\").forEach(header_ => {\n        if (header_ != header && header_.hasAttribute(\"open\")) {\n          if (header_.shadowRoot) {\n            header_.shadowRoot\n              .querySelector(\".header__icon\")\n              .dispatchEvent(new Event(\"click\"));\n          } else {\n            header_\n              .querySelector(\".header__icon\")\n              .dispatchEvent(new Event(\"click\"));\n          }\n        }\n      });\n      model.element.open = !model.element.open;\n      iconView();\n      listView();\n    }\n\n    /********/\n    /* view */\n    /********/\n\n    function view() {\n      shadow.appendChild(styleView());\n\n      const container = document.createElement(\"div\");\n      container.id = \"container\";\n      shadow.appendChild(container);\n\n      container.appendChild(iconView());\n      container.appendChild(listView());\n    }\n\n    function iconView() {\n      // $FlowFixMe\n      let icon = shadow.getElementById(\"icon\");\n\n      if (!icon) {\n        icon = document.createElement(\"div\");\n        icon.id = \"icon\";\n        icon.classList.add(\"header__icon\");\n        icon.title = \"Reputation\";\n        icon.addEventListener(\"click\", (event: MouseEvent) => {\n          event.stopPropagation();\n          toggleReputationList();\n        });\n\n        const star = document.createElement(\"i\");\n        star.id = \"icon__icon\";\n        star.textContent = \"star\";\n        icon.appendChild(star);\n\n        const span = document.createElement(\"span\");\n        span.id = \"icon__reputation\";\n        if (model.reputation !== null && model.reputation !== undefined) {\n          span.textContent = model.reputation.toString();\n        }\n        icon.appendChild(span);\n\n        // $FlowFixMe\n        document.body?.addEventListener(\"click\", (event: MouseEvent) => {\n          if (model.element.open) {\n            toggleReputationList();\n          }\n        });\n      } else {\n        if (model.reputation !== null && model.reputation !== undefined) {\n          // $FlowFixMe\n          shadow.getElementById(\n            \"icon__reputation\",\n          ).textContent = model.reputation.toString();\n        }\n      }\n\n      return icon;\n    }\n\n    function listView() {\n      // $FlowFixMe\n      let list = shadow.getElementById(\"list\");\n      if (!list) {\n        list = document.createElement(\"div\");\n        list.id = \"list\";\n        list.addEventListener(\"click\", (event: MouseEvent) => {\n          event.stopPropagation();\n        });\n      }\n\n      clear(list);\n\n      headerView(list);\n\n      model.reputations.forEach(reputation => {\n        reputationView(list, reputation);\n      });\n\n      return list;\n    }\n\n    function headerView(list: HTMLElement) {\n      const name = document.createElement(\"div\");\n      name.classList.add(\"list__header\");\n      name.textContent = \"Name\";\n      list.appendChild(name);\n\n      const rep = document.createElement(\"div\");\n      rep.classList.add(\"list__header\");\n      rep.textContent = \"Reputation\";\n      list.appendChild(rep);\n    }\n\n    function reputationView(list: HTMLElement, reputation: Reputation) {\n      const name = document.createElement(\"div\");\n      name.classList.add(\"list__name\");\n      name.textContent = `${reputation.name}`;\n      name.title = reputation.description;\n      list.appendChild(name);\n\n      const rep = document.createElement(\"div\");\n      rep.classList.add(\"list__reputation\");\n      rep.textContent = (\n        Math.round(reputation.reputation * 100) / 100\n      ).toString();\n      list.appendChild(rep);\n    }\n\n    function styleView() {\n      const style = document.createElement(\"link\");\n      style.setAttribute(\"href\", model.reputationStyleUrl);\n      style.setAttribute(\"rel\", \"stylesheet\");\n      style.setAttribute(\"nonce\", model.element.nonce_);\n      return style;\n    }\n\n    /********/\n    /* init */\n    /********/\n\n    view();\n    await update();\n  }\n}\n\nif (!customElements.get(\"teacher-reputation-header\")) {\n  customElements.define(\"teacher-reputation-header\", TeacherReputationHeader);\n}\n"],"names":["getCsrfToken","document","getElementsByName","getAttribute","buildReq","data","method","toLowerCase","toUpperCase","headers","body","JSON","stringify","Error","clear","node","hasChildNodes","removeChild","lastChild","ReputationHeader","url","style","id","nonce","hasAttribute","val","setAttribute","removeAttribute","shadow","attachShadow","mode","hidden","init","attrName","oldVal","newVal","update","HTMLElement","TeacherReputationHeader","model","parseInt","reputationId","element","reputation","reputationStyleUrl","reputationType","reputationUrl","reputations","getReputation","postData","reputation_type","req","resp","fetch","json","map","name","full_name","description","iconView","listView","toggleReputationList","header","querySelectorAll","forEach","header_","shadowRoot","querySelector","dispatchEvent","Event","open","view","appendChild","styleView","container","createElement","icon","getElementById","classList","add","title","addEventListener","event","stopPropagation","star","textContent","span","undefined","toString","list","headerView","reputationView","rep","Math","round","nonce_","customElements","get","define"],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9hcnRodXJheWVzdGFzaGlsZ2VydC9EZXNrdG9wL0RldmVsb3BtZW50L215ZGFsaXRlIHByb2plY3QvZGFsaXRlLW5nL3BlZXJpbnN0L3N0YXRpYy9wZWVyaW5zdC9qcy9hamF4LmpzIiwiL1VzZXJzL2FydGh1cmF5ZXN0YXNoaWxnZXJ0L0Rlc2t0b3AvRGV2ZWxvcG1lbnQvbXlkYWxpdGUgcHJvamVjdC9kYWxpdGUtbmcvcGVlcmluc3Qvc3RhdGljL3BlZXJpbnN0L2pzL3V0aWxzLmpzIiwiL1VzZXJzL2FydGh1cmF5ZXN0YXNoaWxnZXJ0L0Rlc2t0b3AvRGV2ZWxvcG1lbnQvbXlkYWxpdGUgcHJvamVjdC9kYWxpdGUtbmcvcmVwdXRhdGlvbi9zdGF0aWMvcmVwdXRhdGlvbi9qcy9oZWFkZXIvaGVhZGVyLmpzIiwiL1VzZXJzL2FydGh1cmF5ZXN0YXNoaWxnZXJ0L0Rlc2t0b3AvRGV2ZWxvcG1lbnQvbXlkYWxpdGUgcHJvamVjdC9kYWxpdGUtbmcvcmVwdXRhdGlvbi9zdGF0aWMvcmVwdXRhdGlvbi9qcy9oZWFkZXIvdGVhY2hlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldENzcmZUb2tlbigpIHtcbiAgcmV0dXJuIGRvY3VtZW50XG4gICAgLmdldEVsZW1lbnRzQnlOYW1lKFwiY3NyZm1pZGRsZXdhcmV0b2tlblwiKVswXVxuICAgIC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUmVxKGRhdGEsIG1ldGhvZCkge1xuICBpZiAobWV0aG9kLnRvTG93ZXJDYXNlKCkgPT09IFwiZ2V0XCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWV0aG9kOiBtZXRob2QudG9VcHBlckNhc2UoKSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwiWC1DU1JGVG9rZW5cIjogZ2V0Q3NyZlRva2VuKCksXG4gICAgICB9LFxuICAgIH07XG4gIH0gZWxzZSBpZiAobWV0aG9kLnRvTG93ZXJDYXNlKCkgPT09IFwicG9zdFwiKSB7XG4gICAgY29uc3QgYm9keSA9IGRhdGEgPyBKU09OLnN0cmluZ2lmeShkYXRhKSA6IFwiXCI7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLnRvVXBwZXJDYXNlKCksXG4gICAgICBib2R5OiBib2R5LFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJYLUNTUkZUb2tlblwiOiBnZXRDc3JmVG9rZW4oKSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBFcnJvcihgTWV0aG9kICR7bWV0aG9kfSBub3QgaW1wbGVtZW50ZWQgeWV0LmApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBc3NpZ25tZW50UXVlc3Rpb25MaXN0KFxuICB1cmwsXG4gIHF1ZXN0aW9uSWQsXG4gIGFzc2lnbm1lbnRJZGVudGlmaWVyLFxuKSB7XG4gIGNvbnN0IHRva2VuID0gZ2V0Q3NyZlRva2VuKCk7XG4gIGNvbnN0IGRhdGEgPSB7XG4gICAgcXVlc3Rpb25faWQ6IHF1ZXN0aW9uSWQsXG4gICAgYXNzaWdubWVudF9pZGVudGlmaWVyOiBhc3NpZ25tZW50SWRlbnRpZmllcixcbiAgfTtcbiAgY29uc3QgcmVxID0ge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgXCJYLUNTUkZUb2tlblwiOiB0b2tlbixcbiAgICB9LFxuICB9O1xuICBmZXRjaCh1cmwsIHJlcSlcbiAgICAudGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICBpZiAoIXJlc3Aub2spIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNYW5pcHVsYXRlIERPTVxuICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJxdWVzdGlvbi1saXN0XCIpO1xuICAgICAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocXVlc3Rpb25JZCk7XG4gICAgICAgIGlmICgkLmNvbnRhaW5zKGxpc3QsIGNhcmQpKSB7XG4gICAgICAgICAgJChcIiNcIiArIHF1ZXN0aW9uSWQpLnJlbW92ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoXCIjXCIgKyBxdWVzdGlvbklkKVxuICAgICAgICAgICAgLmZpbmQoJChcIi51cGRhdGUtcXVlc3Rpb25zLWJ0blwiKSlcbiAgICAgICAgICAgIC5odG1sKFwiZGVsZXRlXCIpO1xuICAgICAgICAgIGNvbnN0IHEgPSAkKFwiI1wiICsgcXVlc3Rpb25JZCkuZGV0YWNoKCk7XG4gICAgICAgICAgcS5hcHBlbmRUbygkKFwiI3F1ZXN0aW9uLWxpc3RcIikpO1xuICAgICAgICAgICQoXCIjZW1wdHktYXNzaWdubWVudC1saXN0XCIpLnJlbW92ZSgpO1xuICAgICAgICAgICQoXCIuc2VhcmNoLXNldFwiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWludmFsaWQtdGhpc1xuICAgICAgICAgICAgICAuZmluZChcIi5maWx0ZXItY291bnRcIilcbiAgICAgICAgICAgICAgLmVtcHR5KClcbiAgICAgICAgICAgICAgLmFwcGVuZCgkKHRoaXMpLmZpbmQoXCIubWRjLWNhcmQ6dmlzaWJsZVwiKS5sZW5ndGgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWludmFsaWQtdGhpcyxtYXgtbGVuXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJChcIi5zZWFyY2gtc2V0XCIpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taW52YWxpZC10aGlzXG4gICAgICAgICAgICAgIC5maW5kKFwiLmZpbHRlci1jb3VudC10b3RhbFwiKVxuICAgICAgICAgICAgICAuZW1wdHkoKVxuICAgICAgICAgICAgICAuYXBwZW5kKCQodGhpcykuZmluZChcIi5tZGMtY2FyZFwiKS5sZW5ndGgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWludmFsaWQtdGhpcyxtYXgtbGVuXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG4iLCIvLyBAZmxvd1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcihub2RlOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHtcbiAgd2hpbGUgKG5vZGUuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgLy8gJEZsb3dGaXhNZVxuICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5sYXN0Q2hpbGQpO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZXRpbWUoZGF0ZXRpbWU6IERhdGUpOiBzdHJpbmcge1xuICByZXR1cm4gKFxuICAgIGRhdGV0aW1lLnRvTG9jYWxlU3RyaW5nKFwiZW4tY2FcIiwgeyB5ZWFyOiBcIm51bWVyaWNcIiB9KSArXG4gICAgXCItXCIgK1xuICAgIGRhdGV0aW1lLnRvTG9jYWxlU3RyaW5nKFwiZW4tY2FcIiwgeyBtb250aDogXCIyLWRpZ2l0XCIgfSkgK1xuICAgIFwiLVwiICtcbiAgICBkYXRldGltZS50b0xvY2FsZVN0cmluZyhcImVuLWNhXCIsIHsgZGF5OiBcIjItZGlnaXRcIiB9KSArXG4gICAgXCIgXCIgK1xuICAgIGRhdGV0aW1lLnRvTG9jYWxlU3RyaW5nKFwiZW4tY2FcIiwgeyBob3VyOiBcIjItZGlnaXRcIiwgaG91cjEyOiBmYWxzZSB9KSArXG4gICAgXCI6XCIgK1xuICAgIGRhdGV0aW1lLnRvTG9jYWxlU3RyaW5nKFwiZW4tY2FcIiwgeyBtaW51dGU6IFwiMi1kaWdpdFwiIH0pXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdmcobmFtZTogc3RyaW5nLCB1c2VTcHJpdGU6IGJvb2xlYW4gPSB0cnVlKTogRWxlbWVudCB7XG4gIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICBjb25zdCB1c2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInVzZVwiKTtcbiAgdXNlLnNldEF0dHJpYnV0ZU5TKFxuICAgIFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuICAgIFwiaHJlZlwiLFxuICAgIHN2Z0xpbmsobmFtZSwgdXNlU3ByaXRlKSxcbiAgKTtcbiAgc3ZnLmFwcGVuZCh1c2UpO1xuICByZXR1cm4gc3ZnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3ZnTGluayhuYW1lOiBzdHJpbmcsIHVzZVNwcml0ZTogYm9vbGVhbiA9IHRydWUpOiBzdHJpbmcge1xuICBpZiAodXNlU3ByaXRlKSB7XG4gICAgcmV0dXJuIGAjJHtuYW1lfWA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArXG4gICAgICBcIi8vXCIgK1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhvc3QgK1xuICAgICAgXCIvc3RhdGljL3BlZXJpbnN0L2ljb25zLnN2ZyNcIiArXG4gICAgICBuYW1lXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvd0FsZXJ0KG1zZzogc3RyaW5nKSB7XG4gIGNvbnN0IGZ1bGxQYWdlQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZnVsbFBhZ2VCb3guY2xhc3NMaXN0LmFkZChcImFsZXJ0LWJveF9fZnVsbC1wYWdlXCIpO1xuICBmdWxsUGFnZUJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZnVsbFBhZ2VCb3gucGFyZW50Tm9kZT8ucmVtb3ZlQ2hpbGQoZnVsbFBhZ2VCb3gpO1xuICB9KTtcbiAgZG9jdW1lbnQuYm9keT8uYXBwZW5kQ2hpbGQoZnVsbFBhZ2VCb3gpO1xuXG4gIGNvbnN0IGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGJveC5jbGFzc0xpc3QuYWRkKFwiYWxlcnQtYm94X19ib3hcIik7XG4gIGJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PlxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLFxuICApO1xuICBmdWxsUGFnZUJveC5hcHBlbmRDaGlsZChib3gpO1xuXG4gIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgc3Bhbi5jbGFzc0xpc3QuYWRkKFwiYWxlcnQtYm94X19tc2dcIik7XG4gIHNwYW4udGV4dENvbnRlbnQgPSBtc2c7XG4gIGJveC5hcHBlbmRDaGlsZChzcGFuKTtcblxuICBjb25zdCBvayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIG9rLmNsYXNzTGlzdC5hZGQoXCJhbGVydC1ib3hfX2J0blwiLCBcIm1kYy1idXR0b25cIiwgXCJtZGMtYnV0dG9uLS11bmVsZXZhdGVkXCIpO1xuICBvay50ZXh0Q29udGVudCA9IFwiT2tcIjtcbiAgYm94LmFwcGVuZENoaWxkKG9rKTtcbn1cbiIsImV4cG9ydCBjbGFzcyBSZXB1dGF0aW9uSGVhZGVyIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAvLyBBbnkgY2hhbmdlIHRvIHN0YWxlIGF0dHJpYnV0ZSBzaG91bGQgZmlyZSBhIHJlZnJlc2ggZXZlbnRcbiAgICByZXR1cm4gW1wic3RhbGVcIl07XG4gIH1cblxuICBnZXQgcmVwdXRhdGlvblVybCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVybCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwicmVwdXRhdGlvbi11cmxcIik7XG4gICAgaWYgKCF1cmwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJUaGUgcmVwdXRhdGlvbi1oZWFkZXIgbmVlZHMgYSBgcmVwdXRhdGlvbi11cmxgIGF0dHJpYnV0ZVwiLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICBnZXQgcmVwdXRhdGlvblN0eWxlVXJsKCk6IHN0cmluZyB7XG4gICAgY29uc3Qgc3R5bGUgPSB0aGlzLmdldEF0dHJpYnV0ZShcInJlcHV0YXRpb24tc3R5bGUtdXJsXCIpO1xuICAgIGlmICghc3R5bGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJUaGUgcmVwdXRhdGlvbi1oZWFkZXIgbmVlZHMgYSBgcmVwdXRhdGlvbi1zdHlsZS11cmxgIGF0dHJpYnV0ZVwiLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlO1xuICB9XG4gIGdldCByZXB1dGF0aW9uSWQoKTogc3RyaW5nIHtcbiAgICBjb25zdCBpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwicmVwdXRhdGlvbi1pZFwiKTtcbiAgICBpZiAoIWlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiVGhlIHJlcHV0YXRpb24taGVhZGVyIG5lZWRzIGEgYHJlcHV0YXRpb24taWRgIGF0dHJpYnV0ZVwiLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGlkO1xuICB9XG4gIGdldCBub25jZV8oKTogc3RyaW5nIHtcbiAgICBjb25zdCBub25jZSA9IHRoaXMuZ2V0QXR0cmlidXRlKFwibm9uY2VcIikgfHwgdGhpcy5ub25jZTtcbiAgICBpZiAoIW5vbmNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiVGhlIHRlYWNoZXItcmVwdXRhdGlvbi1oZWFkZXIgbmVlZHMgYSBgbm9uY2VgIGF0dHJpYnV0ZVwiLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vbmNlO1xuICB9XG4gIGdldCBoaWRkZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiaGlkZGVuXCIpO1xuICB9XG4gIGdldCBvcGVuKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcIm9wZW5cIik7XG4gIH1cbiAgc2V0IGhpZGRlbih2YWw6IGJvb2xlYW4pIHtcbiAgICBpZiAodmFsKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShcImhpZGRlblwiLCBcIlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJoaWRkZW5cIik7XG4gICAgfVxuICB9XG4gIHNldCBvcGVuKHZhbDogYm9vbGVhbikge1xuICAgIGlmICh2YWwpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwib3BlblwiLCBcIlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJvcGVuXCIpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICBjb25zdCBzaGFkb3cgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xuXG4gICAgdGhpcy5oaWRkZW4gPSB0cnVlO1xuXG4gICAgdGhpcy5pbml0KHNoYWRvdyk7XG4gIH1cblxuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0ck5hbWUsIG9sZFZhbCwgbmV3VmFsKSB7XG4gICAgaWYgKGF0dHJOYW1lID09PSBcInN0YWxlXCIpIHtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICB9XG59XG4iLCIvLyBAZmxvd1xuXCJ1c2Ugc3RyaWN0XCI7XG5pbXBvcnQgeyBidWlsZFJlcSB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9wZWVyaW5zdC9zdGF0aWMvcGVlcmluc3QvanMvYWpheC5qc1wiO1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vcGVlcmluc3Qvc3RhdGljL3BlZXJpbnN0L2pzL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBSZXB1dGF0aW9uSGVhZGVyIH0gZnJvbSBcIi4vaGVhZGVyLmpzXCI7XG5cbmNsYXNzIFRlYWNoZXJSZXB1dGF0aW9uSGVhZGVyIGV4dGVuZHMgUmVwdXRhdGlvbkhlYWRlciB7XG4gIGFzeW5jIGluaXQoc2hhZG93OiBTaGFkb3dSb290KSB7XG4gICAgLyoqKioqKioqKi9cbiAgICAvKiBtb2RlbCAqL1xuICAgIC8qKioqKioqKiovXG5cbiAgICB0eXBlIFJlcHV0YXRpb24gPSB7XG4gICAgICBuYW1lOiBzdHJpbmcsXG4gICAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgICAgcmVwdXRhdGlvbjogbnVtYmVyLFxuICAgIH07XG5cbiAgICB0eXBlIE1vZGVsID0ge1xuICAgICAgaWQ6IG51bWJlcixcbiAgICAgIGVsZW1lbnQ6IFRlYWNoZXJSZXB1dGF0aW9uSGVhZGVyLFxuICAgICAgcmVwdXRhdGlvbjogP251bWJlcixcbiAgICAgIHJlcHV0YXRpb25UeXBlOiBzdHJpbmcsXG4gICAgICByZXB1dGF0aW9uVXJsOiBzdHJpbmcsXG4gICAgICByZXB1dGF0aW9uczogQXJyYXk8UmVwdXRhdGlvbj4sXG4gICAgICBzaGFkb3c6IFNoYWRvd1Jvb3QsXG4gICAgfTtcblxuICAgIGNvbnN0IG1vZGVsOiBNb2RlbCA9IHtcbiAgICAgIGlkOiBwYXJzZUludCh0aGlzLnJlcHV0YXRpb25JZCksXG4gICAgICBlbGVtZW50OiB0aGlzLFxuICAgICAgcmVwdXRhdGlvbjogbnVsbCxcbiAgICAgIHJlcHV0YXRpb25TdHlsZVVybDogdGhpcy5yZXB1dGF0aW9uU3R5bGVVcmwsXG4gICAgICByZXB1dGF0aW9uVHlwZTogXCJ0ZWFjaGVyXCIsXG4gICAgICByZXB1dGF0aW9uVXJsOiB0aGlzLnJlcHV0YXRpb25VcmwsXG4gICAgICByZXB1dGF0aW9uczogW10sXG4gICAgICBzaGFkb3c6IHNoYWRvdyxcbiAgICB9O1xuXG4gICAgLyoqKioqKioqKiovXG4gICAgLyogdXBkYXRlICovXG4gICAgLyoqKioqKioqKiovXG4gICAgdGhpcy51cGRhdGUgPSB1cGRhdGU7XG5cbiAgICBhc3luYyBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICBhd2FpdCBnZXRSZXB1dGF0aW9uKCk7XG4gICAgICBpZiAobW9kZWwucmVwdXRhdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICBtb2RlbC5lbGVtZW50LmhpZGRlbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGdldFJlcHV0YXRpb24oKSB7XG4gICAgICBjb25zdCBwb3N0RGF0YSA9IHtcbiAgICAgICAgcmVwdXRhdGlvbl90eXBlOiBtb2RlbC5yZXB1dGF0aW9uVHlwZSxcbiAgICAgICAgaWQ6IG1vZGVsLmlkLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlcSA9IGJ1aWxkUmVxKHBvc3REYXRhLCBcInBvc3RcIik7XG4gICAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2gobW9kZWwucmVwdXRhdGlvblVybCwgcmVxKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICAgIG1vZGVsLnJlcHV0YXRpb24gPSBkYXRhLnJlcHV0YXRpb247XG4gICAgICBtb2RlbC5yZXB1dGF0aW9ucyA9IGRhdGEucmVwdXRhdGlvbnMubWFwKHJlcHV0YXRpb24gPT4gKHtcbiAgICAgICAgbmFtZTogcmVwdXRhdGlvbi5mdWxsX25hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiByZXB1dGF0aW9uLmRlc2NyaXB0aW9uLFxuICAgICAgICByZXB1dGF0aW9uOiByZXB1dGF0aW9uLnJlcHV0YXRpb24sXG4gICAgICB9KSk7XG4gICAgICBpY29uVmlldygpO1xuICAgICAgbGlzdFZpZXcoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVSZXB1dGF0aW9uTGlzdCgpIHtcbiAgICAgIGNvbnN0IGhlYWRlciA9IG1vZGVsLmVsZW1lbnQ7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhlYWRlci0tdG9nZ2xhYmxlID4gKlwiKS5mb3JFYWNoKGhlYWRlcl8gPT4ge1xuICAgICAgICBpZiAoaGVhZGVyXyAhPSBoZWFkZXIgJiYgaGVhZGVyXy5oYXNBdHRyaWJ1dGUoXCJvcGVuXCIpKSB7XG4gICAgICAgICAgaWYgKGhlYWRlcl8uc2hhZG93Um9vdCkge1xuICAgICAgICAgICAgaGVhZGVyXy5zaGFkb3dSb290XG4gICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9faWNvblwiKVxuICAgICAgICAgICAgICAuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjbGlja1wiKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhlYWRlcl9cbiAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19pY29uXCIpXG4gICAgICAgICAgICAgIC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImNsaWNrXCIpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbW9kZWwuZWxlbWVudC5vcGVuID0gIW1vZGVsLmVsZW1lbnQub3BlbjtcbiAgICAgIGljb25WaWV3KCk7XG4gICAgICBsaXN0VmlldygpO1xuICAgIH1cblxuICAgIC8qKioqKioqKi9cbiAgICAvKiB2aWV3ICovXG4gICAgLyoqKioqKioqL1xuXG4gICAgZnVuY3Rpb24gdmlldygpIHtcbiAgICAgIHNoYWRvdy5hcHBlbmRDaGlsZChzdHlsZVZpZXcoKSk7XG5cbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBjb250YWluZXIuaWQgPSBcImNvbnRhaW5lclwiO1xuICAgICAgc2hhZG93LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uVmlldygpKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsaXN0VmlldygpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpY29uVmlldygpIHtcbiAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgIGxldCBpY29uID0gc2hhZG93LmdldEVsZW1lbnRCeUlkKFwiaWNvblwiKTtcblxuICAgICAgaWYgKCFpY29uKSB7XG4gICAgICAgIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBpY29uLmlkID0gXCJpY29uXCI7XG4gICAgICAgIGljb24uY2xhc3NMaXN0LmFkZChcImhlYWRlcl9faWNvblwiKTtcbiAgICAgICAgaWNvbi50aXRsZSA9IFwiUmVwdXRhdGlvblwiO1xuICAgICAgICBpY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICB0b2dnbGVSZXB1dGF0aW9uTGlzdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzdGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlcIik7XG4gICAgICAgIHN0YXIuaWQgPSBcImljb25fX2ljb25cIjtcbiAgICAgICAgc3Rhci50ZXh0Q29udGVudCA9IFwic3RhclwiO1xuICAgICAgICBpY29uLmFwcGVuZENoaWxkKHN0YXIpO1xuXG4gICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgc3Bhbi5pZCA9IFwiaWNvbl9fcmVwdXRhdGlvblwiO1xuICAgICAgICBpZiAobW9kZWwucmVwdXRhdGlvbiAhPT0gbnVsbCAmJiBtb2RlbC5yZXB1dGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gbW9kZWwucmVwdXRhdGlvbi50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGljb24uYXBwZW5kQ2hpbGQoc3Bhbik7XG5cbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICBkb2N1bWVudC5ib2R5Py5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgaWYgKG1vZGVsLmVsZW1lbnQub3Blbikge1xuICAgICAgICAgICAgdG9nZ2xlUmVwdXRhdGlvbkxpc3QoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG1vZGVsLnJlcHV0YXRpb24gIT09IG51bGwgJiYgbW9kZWwucmVwdXRhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICAgIHNoYWRvdy5nZXRFbGVtZW50QnlJZChcbiAgICAgICAgICAgIFwiaWNvbl9fcmVwdXRhdGlvblwiLFxuICAgICAgICAgICkudGV4dENvbnRlbnQgPSBtb2RlbC5yZXB1dGF0aW9uLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGljb247XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGlzdFZpZXcoKSB7XG4gICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICBsZXQgbGlzdCA9IHNoYWRvdy5nZXRFbGVtZW50QnlJZChcImxpc3RcIik7XG4gICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGxpc3QuaWQgPSBcImxpc3RcIjtcbiAgICAgICAgbGlzdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjbGVhcihsaXN0KTtcblxuICAgICAgaGVhZGVyVmlldyhsaXN0KTtcblxuICAgICAgbW9kZWwucmVwdXRhdGlvbnMuZm9yRWFjaChyZXB1dGF0aW9uID0+IHtcbiAgICAgICAgcmVwdXRhdGlvblZpZXcobGlzdCwgcmVwdXRhdGlvbik7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGVhZGVyVmlldyhsaXN0OiBIVE1MRWxlbWVudCkge1xuICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBuYW1lLmNsYXNzTGlzdC5hZGQoXCJsaXN0X19oZWFkZXJcIik7XG4gICAgICBuYW1lLnRleHRDb250ZW50ID0gXCJOYW1lXCI7XG4gICAgICBsaXN0LmFwcGVuZENoaWxkKG5hbWUpO1xuXG4gICAgICBjb25zdCByZXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgcmVwLmNsYXNzTGlzdC5hZGQoXCJsaXN0X19oZWFkZXJcIik7XG4gICAgICByZXAudGV4dENvbnRlbnQgPSBcIlJlcHV0YXRpb25cIjtcbiAgICAgIGxpc3QuYXBwZW5kQ2hpbGQocmVwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXB1dGF0aW9uVmlldyhsaXN0OiBIVE1MRWxlbWVudCwgcmVwdXRhdGlvbjogUmVwdXRhdGlvbikge1xuICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBuYW1lLmNsYXNzTGlzdC5hZGQoXCJsaXN0X19uYW1lXCIpO1xuICAgICAgbmFtZS50ZXh0Q29udGVudCA9IGAke3JlcHV0YXRpb24ubmFtZX1gO1xuICAgICAgbmFtZS50aXRsZSA9IHJlcHV0YXRpb24uZGVzY3JpcHRpb247XG4gICAgICBsaXN0LmFwcGVuZENoaWxkKG5hbWUpO1xuXG4gICAgICBjb25zdCByZXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgcmVwLmNsYXNzTGlzdC5hZGQoXCJsaXN0X19yZXB1dGF0aW9uXCIpO1xuICAgICAgcmVwLnRleHRDb250ZW50ID0gKFxuICAgICAgICBNYXRoLnJvdW5kKHJlcHV0YXRpb24ucmVwdXRhdGlvbiAqIDEwMCkgLyAxMDBcbiAgICAgICkudG9TdHJpbmcoKTtcbiAgICAgIGxpc3QuYXBwZW5kQ2hpbGQocmVwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdHlsZVZpZXcoKSB7XG4gICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuICAgICAgc3R5bGUuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBtb2RlbC5yZXB1dGF0aW9uU3R5bGVVcmwpO1xuICAgICAgc3R5bGUuc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcbiAgICAgIHN0eWxlLnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG1vZGVsLmVsZW1lbnQubm9uY2VfKTtcbiAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9XG5cbiAgICAvKioqKioqKiovXG4gICAgLyogaW5pdCAqL1xuICAgIC8qKioqKioqKi9cblxuICAgIHZpZXcoKTtcbiAgICBhd2FpdCB1cGRhdGUoKTtcbiAgfVxufVxuXG5pZiAoIWN1c3RvbUVsZW1lbnRzLmdldChcInRlYWNoZXItcmVwdXRhdGlvbi1oZWFkZXJcIikpIHtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwidGVhY2hlci1yZXB1dGF0aW9uLWhlYWRlclwiLCBUZWFjaGVyUmVwdXRhdGlvbkhlYWRlcik7XG59XG4iXSwibmFtZXMiOlsiZ2V0Q3NyZlRva2VuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5TmFtZSIsImdldEF0dHJpYnV0ZSIsImJ1aWxkUmVxIiwiZGF0YSIsIm1ldGhvZCIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJFcnJvciIsImNsZWFyIiwibm9kZSIsImhhc0NoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImxhc3RDaGlsZCIsIlJlcHV0YXRpb25IZWFkZXIiLCJ1cmwiLCJzdHlsZSIsImlkIiwibm9uY2UiLCJoYXNBdHRyaWJ1dGUiLCJ2YWwiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzaGFkb3ciLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwiaGlkZGVuIiwiaW5pdCIsImF0dHJOYW1lIiwib2xkVmFsIiwibmV3VmFsIiwidXBkYXRlIiwiSFRNTEVsZW1lbnQiLCJUZWFjaGVyUmVwdXRhdGlvbkhlYWRlciIsIm1vZGVsIiwicGFyc2VJbnQiLCJyZXB1dGF0aW9uSWQiLCJlbGVtZW50IiwicmVwdXRhdGlvbiIsInJlcHV0YXRpb25TdHlsZVVybCIsInJlcHV0YXRpb25UeXBlIiwicmVwdXRhdGlvblVybCIsInJlcHV0YXRpb25zIiwiZ2V0UmVwdXRhdGlvbiIsInBvc3REYXRhIiwicmVwdXRhdGlvbl90eXBlIiwicmVxIiwicmVzcCIsImZldGNoIiwianNvbiIsIm1hcCIsIm5hbWUiLCJmdWxsX25hbWUiLCJkZXNjcmlwdGlvbiIsImljb25WaWV3IiwibGlzdFZpZXciLCJ0b2dnbGVSZXB1dGF0aW9uTGlzdCIsImhlYWRlciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaGVhZGVyXyIsInNoYWRvd1Jvb3QiLCJxdWVyeVNlbGVjdG9yIiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50Iiwib3BlbiIsInZpZXciLCJhcHBlbmRDaGlsZCIsInN0eWxlVmlldyIsImNvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJpY29uIiwiZ2V0RWxlbWVudEJ5SWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0aXRsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsInN0YXIiLCJ0ZXh0Q29udGVudCIsInNwYW4iLCJ1bmRlZmluZWQiLCJ0b1N0cmluZyIsImxpc3QiLCJoZWFkZXJWaWV3IiwicmVwdXRhdGlvblZpZXciLCJyZXAiLCJNYXRoIiwicm91bmQiLCJub25jZV8iLCJjdXN0b21FbGVtZW50cyIsImdldCIsImRlZmluZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUVBLEFBQU8sU0FBU0EsWUFBVCxHQUF3QjtTQUN0QkMsUUFBUSxDQUNaQyxpQkFESSxDQUNjLHFCQURkLEVBQ3FDLENBRHJDLEVBRUpDLFlBRkksQ0FFUyxPQUZULENBQVA7O0FBS0YsQUFBTyxTQUFTQyxRQUFULENBQWtCQyxJQUFsQixFQUF3QkMsTUFBeEIsRUFBZ0M7TUFDakNBLE1BQU0sQ0FBQ0MsV0FBUCxPQUF5QixLQUE3QixFQUFvQztXQUMzQjtNQUNMRCxNQUFNLEVBQUVBLE1BQU0sQ0FBQ0UsV0FBUCxFQURIO01BRUxDLE9BQU8sRUFBRTt3QkFDUyxrQkFEVDt1QkFFUVQsWUFBWTs7S0FKL0I7R0FERixNQVFPLElBQUlNLE1BQU0sQ0FBQ0MsV0FBUCxPQUF5QixNQUE3QixFQUFxQztR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"}